// Free-Form Template specific styles
.free-form-builder {
  .page-subtitle {
    text-align: center;
    margin-top: 2rem;
    margin-bottom: 2rem;
    
    h2 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--color-fg);
      margin-bottom: 0.5rem;
    }
    
    p {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.7);
      margin: 0;
    }
  }

  .template-card {
    position: relative;
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1); // Smooth animation for all cards
    
    &.draggable {
      cursor: grab;
      transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease;
      
      &:active {
        cursor: grabbing;
        position: relative;
      }
    }
    
    &.locked {
      transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), border-color 300ms ease;
      cursor: default;

      &:hover {
        border-color: #4791FF;
        transform: translateY(0px) scale(1);
      }
      
      .template-content {
        opacity: 1;
      }
    }
    
    &.dragging {
      z-index: 100;
      transform: scale(1.05) rotate(2deg);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4), 
                  0 6px 12px rgba(0, 0, 0, 0.3);
      opacity: 1 !important; // Override the dnd-kit default opacity
      border-color: #4791FF;
      transition: box-shadow 0.2s ease, border-color 0.2s ease; // No transform transition while dragging
    }

    // Move card left when it's before the drop position
    &.move-left {
      transform: translateX(-20px);
    }

    // Move card right when it's at the drop position
    &.move-right {
      transform: translateX(20px);
    }
  }

  .drag-handle {
    position: absolute;
    top: 24px;
    right: 10px;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.4);
    cursor: grab;
    z-index: 10;
    transition: color 0.2s ease;
    
    &:hover {
      color: rgba(255, 255, 255, 0.8);
    }
    
    &:active {
      cursor: grabbing;
      color: #FEC62E;
    }
    
    svg {
      width: 20px;
      height: 20px;
    }
  }

  .lock-icon {
    position: absolute;
    top: 24px;
    right: 10px;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.3);
    z-index: 10;
    pointer-events: none;
    
    svg {
      width: 100%;
      height: 100%;
    }
  }

  // Drop indicator - shows where card will be placed
  .drop-indicator {
    position: absolute;
    left: -20px; 
    top: 0;
    bottom: 0;
    width: 2px;
    background: #FEC62E;
    box-shadow: 0 0 8px rgba(254, 198, 46, 0.6),
                0 0 16px rgba(254, 198, 46, 0.4);
    z-index: 200;
    animation: dropIndicatorFadeIn 0.2s ease;
    pointer-events: none; // Don't interfere with drag events
  }

  @keyframes dropIndicatorFadeIn {
    from {
      opacity: 0;
      transform: scaleY(0.8);
    }
    to {
      opacity: 1;
      transform: scaleY(1);
    }
  }

  // Visual feedback for drag states - only for draggable cards
  .template-card.draggable:not(.ready):not(.dragging) {
    transition: transform 0.3s ease;
    
    &:hover {
      transform: translateY(-4px) scale(1.05);
    }
  }

  // Disable hover effects on all cards when dragging is active
  &.dragging-active {
    .template-card.draggable:not(.dragging) {
      &:hover {
        transform: none !important; // Completely disable hover transform
      }
    }
    
    // Also handle the move-left and move-right states during drag
    .template-card.move-left:hover {
      transform: translateX(-20px) !important; // Keep only the X translation
    }
    
    .template-card.move-right:hover {
      transform: translateX(20px) !important; // Keep only the X translation
    }
  }
}

